# Chapter 9. 아키텍처 스타일 - 기초

아키텍처 스타일 = 아키텍처 패턴
다양한 아키텍처 특성을 다루는 컴포넌트의 명명된 관계를 기술한다.


## 기초 패턴
'레이어'는 기능에 따라 서로 다른 관심사를 분리하는 개념이다.

### 진흙잡탕
뚜렷한 아키텍처 구조가 전무한 상태 = 진흙잡탕

구조가 없으면 앞으로 뭔가 변경하기가 점점 더 어려워지고, 배포, 테스트, 확장, 성능 역시 고통스럽다.

*원인은 코드 품질 및 구조에 관한 거버넌스가 결여된 탓에 본의 아니게 그렇게 된다.*

> ! 이클립스의 XRay 의 자바스크립트 버전이 있는지 찾아보자

### 유니터리 아키텍처 (단일, 통일 아키텍처)
메인 프레임

> ! 모놀리틱 아키텍처의 상위 범주일까?

### 클라이언트/서버 (2티어)
프론트엔드와 백엔드로 기술적으로 기능을 분리한 아키텍처

> ! 우리는 데이터베이스, 애플리케이션, 프론트엔드 로 구분된 3티어 환경일까?

## 모놀리식 vs 분산 아키텍처
분산 아키텍처 스타일은 성능, 확장성, 가용성 측면에서 강력하다.
그럼에도 불구하고 트레이드오프가 수반되는데.

옳다고 믿거나 가정하지만 실은 틀린것 8 가지

### 오류 1. 네트워크는 믿을 수 있다.
개발자, 아키텍트는 모두 네트워크는 믿을 수 있다고 전제하지만 실제로는 전혀 그렇지 않다.
'네트워크에 의존'하는 것은 아주 중요한 문제다.
시스템이 네트워크에 더 의존할수록 시스템의 신뢰도는 잠재적으로 떨어질 가능성이 있다.

> ! 네트워크가 아닌 방식으로 해결 할 수 있을까? RPC...?
> ! RPC 도 결국에 네트워크...아닌강

### 오류 2. 레이턴시는 0이다.
모든 분산 아키텍처에서 레이턴시는 0이 아니다.

아키텍트는 어떤 분산 아키텍처를 구축하든지 간에 평균 레이턴시는 반드시 알아야 한다.
분산 아키텍처가 실현 가능한지 판단하는 유일한 방법이다.

서비스가 잘게 나뉘어 있기 때문에 서비스 간 통신량도 무시할 수 없다.

> ! 운영 환경에서 평균 왕복 레이턴시가 얼마나 되는지 측정해보자.

### 오류 3. 대역폭은 무한하다.
A -> B -> C -> D -> .... -> NZ 
통신 깊이가 깊어지고, 통신에 필요한 데이터가 A -> NZ 까지 전달되는데 
최종 사용자에게 200 Byte 필요하지만 .... 깊어지면서 

-> 스탬프 커플링

시스템 간에 최소한의 데이터만 주고받도록 하는 것이 이 오류를 바로잡는 최선의 길이다.

### 오류 4. 네트워크는 안전하다.
공격 포인트가 많아진다.
모든 서비스에 보안이 적용되야 하므로 성능이 떨어질 수 밖에 없다.

> ! 어찌보면 가장 앞단에 WAF 로 요청을 필터링 하는 부분이 값싸게 보안성을 달성할 수 있는 요소 아니였을까?

### 오류 5. 토폴로지는 절대 안 바뀐다.
전체 네트워크 토폴로지가 불변일 거란 가정은 섣부른 오해이다.

### 오류 6. 관리자는 한 사람뿐이다.

### 오류 7. 운송비는 0이다.
단순한 API 호출하는데 소요되는 진짜 비용을 말한다.

> ! 분석방법도 알려됴

### 오류 8. 네트워크는 균일하다.
네트워크를 구성하는 장비들은 하나로 통일되어 있지 않다.
잠재적으로 호환이 안되는 부분이 발견될 수도 있다.
(서로 다른 장비가 잘 맞물려 동작하는건 아니다.)

> ! 새삼 느껴지는 모래성

## 다른 분산 아키텍처 고려 사항

### 분산 로깅

### 분산 트래잭션

### 계약 관리 및 버저닝


> ! 분산 아키텍처의 어려움을 소개하는걸로 보아... 무지성으로 트랜드를 쫒을 것이 아니라 모놀리식에서 취할것은 취하고 하이브리드쪽으로 흘러가지않을까...